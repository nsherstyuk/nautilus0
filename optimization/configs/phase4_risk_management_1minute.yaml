# Phase 4: 1-Minute Data Risk Management Optimization
# ==================================================
# 
# This configuration is optimized for 1-minute data instead of 15-minute data.
# Parameters are scaled appropriately for higher frequency trading.
# 
# Key Changes for 1-Minute Data:
# - Tighter stop losses (more noise requires smaller stops)
# - Smaller take profits (price moves are smaller per bar)
# - Earlier trailing activation (protect profits from noise)
# - Tighter trailing distances (follow price more closely)
# 
# Total combinations: 4 × 4 × 3 × 4 = 192 combinations
# Expected runtime: 3-4 hours with 8 workers
# 
# Prerequisites: 
# - Phase 1, 2, 3 must be re-run with 1-minute data first
# - Phase 3 best results will be different for 1-minute data

# Optimization Settings
optimization:
  objective: sharpe_ratio
  workers: 8
  checkpoint_interval: 10
  timeout_seconds: 300
  output_file: optimization/results/phase4_1minute_results.csv
  checkpoint_file: optimization/checkpoints/phase4_1minute_checkpoint.csv

# Parameters Being Optimized (Scaled for 1-Minute Data)
parameters:
  # Stop Loss Pips: Tighter range for 1-minute noise
  # 1-minute data has more noise, so stops need to be tighter
  stop_loss_pips:
    values:
      - 8   # Very tight stop for 1-minute noise
      - 12  # Tight stop
      - 16  # Moderate stop
      - 20  # Loose stop for 1-minute data

  # Take Profit Pips: Smaller targets for 1-minute moves
  # Price moves are smaller per bar in 1-minute data
  take_profit_pips:
    values:
      - 16  # Small target (2:1 RR with 8 pip SL)
      - 24  # Moderate target (2:1 RR with 12 pip SL)
      - 32  # Larger target (2:1 RR with 16 pip SL)
      - 40  # Large target (2:1 RR with 20 pip SL)

  # Trailing Stop Activation: Earlier activation for 1-minute noise
  # Need to protect profits quickly from 1-minute volatility
  trailing_stop_activation_pips:
    values:
      - 12  # Very early activation
      - 16  # Early activation
      - 20  # Moderate activation

  # Trailing Stop Distance: Tighter trailing for 1-minute data
  # Need to follow price more closely in 1-minute data
  trailing_stop_distance_pips:
    values:
      - 4   # Very tight trailing
      - 6   # Tight trailing
      - 8   # Moderate trailing
      - 10  # Loose trailing for 1-minute

# Fixed Parameters (Will be updated after Phase 3 re-run with 1-minute data)
# NOTE: These values are PLACEHOLDERS and must be updated with Phase 3 results
fixed:
  # MA Parameters (Will be updated from Phase 3 1-minute results)
  # These will likely be different from 15-minute optimized values
  fast_period: 50                    # Placeholder - update from Phase 3
  slow_period: 200                  # Placeholder - update from Phase 3
  crossover_threshold_pips: 0.2     # Placeholder - update from Phase 3

  # Crossover Filter Parameters (Fixed)
  pre_crossover_separation_pips: 0.0
  pre_crossover_lookback_bars: 1

  # DMI Filter Parameters (Will be optimized in Phase 5)
  # These may need adjustment for 1-minute data
  dmi_enabled: true
  dmi_period: 10                    # Reduced from 14 for 1-minute data
  dmi_bar_spec: "1-MINUTE-MID-EXTERNAL"  # Changed from 2-MINUTE

  # Stochastic Filter Parameters (Will be optimized in Phase 5)
  # These may need adjustment for 1-minute data
  stoch_enabled: true
  stoch_period_k: 10                # Reduced from 14 for 1-minute data
  stoch_period_d: 3
  stoch_bullish_threshold: 30
  stoch_bearish_threshold: 70
  stoch_max_bars_since_crossing: 5  # Reduced from 9 for 1-minute data
  stoch_bar_spec: "1-MINUTE-MID-EXTERNAL"  # Changed from 15-MINUTE

  # Trade Sizing and Position Management (Fixed)
  trade_size: 100000
  enforce_position_limit: true
  allow_position_reversal: false

# Configuration Summary for 1-Minute Data
# =======================================
# Total combinations: 4 × 4 × 3 × 4 = 192 combinations
# Parameters being optimized: 4 risk management parameters
# Fixed parameters: 17 parameters (to be updated from Phase 3 1-minute results)
# 
# Expected runtime breakdown:
#   - Per backtest: ~30 seconds (1-minute data is faster to process)
#   - Total backtest time: 192 × 30s = 5,760s = 96 minutes
#   - Parallelized: 96 min ÷ 8 workers = ~12 minutes pure compute
#   - With overhead: 3-4 hours total
#
# Key differences from 15-minute data:
#   - More noise requires tighter risk management
#   - Smaller price moves per bar
#   - Faster execution (more bars but simpler calculations)
#   - Different optimal MA periods
#   - Different filter parameters
#
# Success criteria for 1-minute data:
#   - Best Sharpe ratio improves on Phase 3 1-minute baseline
#   - Profit factor > 1.3 (more conservative due to noise)
#   - Win rate stability (35-45% range due to noise)
#   - Max drawdown < $1,500 (tighter due to higher frequency)
#   - Top 10 results show clear risk/reward patterns
