# Phase 6: Parameter Refinement and Sensitivity Analysis
# Selective refinement of most sensitive parameters from Phases 3-5 using multi-objective Pareto optimization
# 
# Generated by: C:/nautilus0/optimization/tools/update_phase6_config.py
# Generated on: 2025-10-24 11:39:24
# Source: optimization/results/phase5_sensitivity_analysis.json
# 
# This configuration uses SELECTIVE refinement (not full ±10% grid on all parameters) to avoid combinatorial explosion.
# Total combinations: 48 (based on selective parameter refinement)
# 
# Prerequisites: Phase 5 must complete successfully
# Phase 5 Best Results reference:
#   - All parameters from Phase 5 rank 1 (fast=42, slow=270, threshold=0.35, SL=35, TP=50, TA=22, TD=12, dmi_enabled=true, dmi_period=10, stoch_k=18, stoch_d=3, stoch_bullish=30, stoch_bearish=65)
#   - sharpe_ratio: 0.4779 (11.6% improvement over Phase 4)
#   - Source: optimization/results/phase5_filters_results_top_10.json
# 
# Key Insight: Phase 5 ranks 1-6 have identical Sharpe (0.4779) with dmi_enabled varying, suggesting DMI has minimal impact
# 
# Parameters being refined (4 parameters):
#   - stoch_period_d
#   - stoch_bearish_threshold
#   - stoch_period_k
#   - stoch_bullish_threshold
# 
# Parameters fixed at Phase 5 best values (8 parameters):
#   - fast_period: 42
#   - slow_period: 270
#   - crossover_threshold_pips: 0.35
#   - stop_loss_pips: 35
#   - take_profit_pips: 50
#   - trailing_stop_activation_pips: 22
#   - trailing_stop_distance_pips: 12
#   - dmi_period: 10
# 
# Combination calculation: 1 × 4 × 3 × 4 = 48
# 
# Usage example with Pareto flag:
#   python optimization/grid_search.py #     --config optimization/configs/phase6_refinement.yaml #     --objective sharpe_ratio #     --pareto sharpe_ratio total_pnl max_drawdown #     --workers 8 #     --output optimization/results/phase6_refinement_results.csv #     --no-resume #     --verbose
# 
# Expected runtime: 4-6 hours with 8 workers (48 backtests)
# Phase context: Fifth optimization phase, results will be used for Phase 7 walk-forward validation
# 
# Success criteria:
#   - Maintain Phase 5 Sharpe ratio (0.4779) or improve
#   - Generate robust Pareto frontier with 10-20 non-dominated solutions
#   - Identify 5 diverse parameter sets balancing Sharpe, PnL, and drawdown
#   - Comprehensive sensitivity analysis showing parameter stability
#   - Top 5 parameter sets ready for walk-forward validation

optimization:
  objective: sharpe_ratio
  workers: 8
  checkpoint_interval: 10
  timeout_seconds: 300
  output_file: optimization/results/phase6_refinement_results.csv
  checkpoint_file: optimization/checkpoints/phase6_refinement_checkpoint.csv
parameters:
  stoch_period_d:
    values:
    - 3
    rationale: High sensitivity score (0.3923) - significant impact on Sharpe ratio
    phase5_best: 3
  stoch_bearish_threshold:
    values:
    - 59
    - 63
    - 67
    - 71
    rationale: High sensitivity score (0.3545) - significant impact on Sharpe ratio
    phase5_best: 65
  stoch_period_k:
    values:
    - 17
    - 18
    - 19
    rationale: High sensitivity score (0.1024) - significant impact on Sharpe ratio
    phase5_best: 18
  stoch_bullish_threshold:
    values:
    - 27
    - 29
    - 31
    - 33
    rationale: High sensitivity score (0.0901) - significant impact on Sharpe ratio
    phase5_best: 30
fixed:
  dmi_enabled: true
  stoch_enabled: true
  stoch_max_bars_since_crossing: 9
  dmi_bar_spec: 2-MINUTE-MID-EXTERNAL
  stoch_bar_spec: 15-MINUTE-MID-EXTERNAL
  pre_crossover_separation_pips: 0.0
  pre_crossover_lookback_bars: 1
  trade_size: 100000
  enforce_position_limit: true
  allow_position_reversal: false
  take_profit_pips: 50
  trailing_stop_activation_pips: 22
  trailing_stop_distance_pips: 12
  dmi_period: 10
  fast_period: 42
  slow_period: 270
  crossover_threshold_pips: 0.35
  stop_loss_pips: 35
