# EUR/USD Optimized Configuration
# Baseline results: $14,845 PnL, 35.9% win rate, 195 trades
# Last updated: November 2025

# =============================================================================
# DATA INGESTION
# =============================================================================
DATA_SYMBOLS=EUR/USD
DATA_START_DATE=2024-01-01
DATA_END_DATE=2025-10-30

# =============================================================================
# IBKR CONNECTION
# =============================================================================
IB_HOST=127.0.0.1
IB_PORT=7497
IB_CLIENT_ID=17
IB_ACCOUNT_ID=DU1558484
IB_MARKET_DATA_TYPE=REALTIME
IB_MAX_CONNECTION_ATTEMPTS=5

# =============================================================================
# BACKTESTING PARAMETERS
# =============================================================================
BACKTEST_SYMBOL=EUR/USD
BACKTEST_START_DATE=2024-01-01
BACKTEST_END_DATE=2025-10-30
BACKTEST_VENUE=IDEALPRO
BACKTEST_BAR_SPEC=15-MINUTE-MID-EXTERNAL

# Moving Average Periods (Optimized)
BACKTEST_FAST_PERIOD=40
BACKTEST_SLOW_PERIOD=260

# Position Sizing
BACKTEST_TRADE_SIZE=100000
BACKTEST_STARTING_CAPITAL=100000.0
CATALOG_PATH=data/historical
OUTPUT_DIR=logs/backtest_results
ENFORCE_POSITION_LIMIT=true
ALLOW_POSITION_REVERSAL=false

# =============================================================================
# ADAPTIVE STOPS CONFIGURATION (EUR/USD)
# =============================================================================
# NOTE: The $14,845 winning run used FIXED stops, not adaptive!
# Using fixed stops with regime detection multipliers

BACKTEST_ADAPTIVE_STOP_MODE=fixed
BACKTEST_ADAPTIVE_ATR_PERIOD=14

# Stop Loss: 1.4 × ATR (optimal from 16-run grid)
BACKTEST_SL_ATR_MULT=1.4

# Take Profit: 4.25 × ATR (optimal from 16-run grid)
BACKTEST_TP_ATR_MULT=4.25

# Trailing stops
BACKTEST_TRAIL_ACTIVATION_ATR_MULT=0.8
BACKTEST_TRAIL_DISTANCE_ATR_MULT=0.6

# Volatility scaling
BACKTEST_VOLATILITY_WINDOW=200
BACKTEST_VOLATILITY_SENSITIVITY=0.6
BACKTEST_MIN_STOP_DISTANCE_PIPS=5.0

# Fixed stop fallback (if adaptive_stop_mode=fixed)
BACKTEST_STOP_LOSS_PIPS=25
BACKTEST_TAKE_PROFIT_PIPS=80
BACKTEST_TRAILING_STOP_ACTIVATION_PIPS=25
BACKTEST_TRAILING_STOP_DISTANCE_PIPS=20

# Market Regime Detection (from $14,845 winning run)
STRATEGY_REGIME_DETECTION_ENABLED=true
STRATEGY_REGIME_ADX_TRENDING_THRESHOLD=25.0
STRATEGY_REGIME_ADX_RANGING_THRESHOLD=20.0
STRATEGY_REGIME_TP_MULTIPLIER_TRENDING=1.5
STRATEGY_REGIME_TP_MULTIPLIER_RANGING=0.8
STRATEGY_REGIME_SL_MULTIPLIER_TRENDING=1.0
STRATEGY_REGIME_SL_MULTIPLIER_RANGING=1.0
STRATEGY_REGIME_TRAILING_ACTIVATION_MULTIPLIER_TRENDING=0.75
STRATEGY_REGIME_TRAILING_ACTIVATION_MULTIPLIER_RANGING=1.25
STRATEGY_REGIME_TRAILING_DISTANCE_MULTIPLIER_TRENDING=0.67
STRATEGY_REGIME_TRAILING_DISTANCE_MULTIPLIER_RANGING=1.33

# =============================================================================
# STRATEGY FILTERS (EUR/USD OPTIMIZED)
# =============================================================================
STRATEGY_CROSSOVER_THRESHOLD_PIPS=0.15

# Trend Filter
STRATEGY_TREND_FILTER_ENABLED=false
STRATEGY_TREND_BAR_SPEC=5-MINUTE-MID-EXTERNAL
STRATEGY_TREND_EMA_PERIOD=200
STRATEGY_TREND_EMA_THRESHOLD_PIPS=2.0

# RSI Filter
STRATEGY_RSI_ENABLED=false
STRATEGY_RSI_PERIOD=14
STRATEGY_RSI_OVERBOUGHT=70
STRATEGY_RSI_OVERSOLD=30
STRATEGY_RSI_DIVERGENCE_LOOKBACK=5

# Volume Filter
STRATEGY_VOLUME_ENABLED=false
STRATEGY_VOLUME_AVG_PERIOD=20
STRATEGY_VOLUME_MIN_MULTIPLIER=1.2

# ATR Filter
STRATEGY_ATR_ENABLED=false
STRATEGY_ATR_PERIOD=14
STRATEGY_ATR_MIN_STRENGTH=0.0004

# DMI Filter (Disabled - not used in $14,845 winning run)
STRATEGY_DMI_ENABLED=false
STRATEGY_DMI_PERIOD=14
STRATEGY_DMI_ADX_THRESHOLD=25.0
STRATEGY_DMI_DI_SEPARATION=5.0

# Multi-Timeframe Analysis
STRATEGY_MTF_ENABLED=false
STRATEGY_MTF_TREND_TIMEFRAME=4-HOUR-MID-EXTERNAL
STRATEGY_MTF_TREND_EMA_PERIOD=50
STRATEGY_MTF_STRUCTURE_TIMEFRAME=1-HOUR-MID-EXTERNAL
STRATEGY_MTF_STRUCTURE_LOOKBACK=20
STRATEGY_MTF_STRUCTURE_THRESHOLD_PIPS=5.0

# =============================================================================
# TIME FILTERS - OPTIMIZED (from $14,845 winning run)
# =============================================================================
# Weekday-specific exclusions optimized for EUR/USD
# Excludes low-liquidity hours: Asia session, lunch hours, late US session
BACKTEST_TIME_FILTER_ENABLED=true
BACKTEST_EXCLUDED_HOURS=0,1,8,10,11,12,13,18,19,23
BACKTEST_EXCLUDED_HOURS_MODE=weekday
BACKTEST_EXCLUDED_HOURS_MONDAY=0,1,3,4,5,8,10,11,12,13,18,19,23
BACKTEST_EXCLUDED_HOURS_TUESDAY=0,1,2,4,5,6,7,8,9,10,11,12,13,18,19,23
BACKTEST_EXCLUDED_HOURS_WEDNESDAY=0,1,8,9,10,11,12,13,14,15,16,17,18,19,23
BACKTEST_EXCLUDED_HOURS_THURSDAY=0,1,2,7,8,10,11,12,13,14,18,19,22,23
BACKTEST_EXCLUDED_HOURS_FRIDAY=0,1,2,3,4,5,8,9,10,11,12,13,14,15,16,17,18,19,23
BACKTEST_EXCLUDED_HOURS_SATURDAY=
BACKTEST_EXCLUDED_HOURS_SUNDAY=0,1,8,10,11,12,13,18,19,21,22,23

# =============================================================================
# MARKET REGIME DETECTION
# =============================================================================
REGIME_DETECTION_ENABLED=false
REGIME_DETECTION_TIMEFRAME=1-HOUR-MID-EXTERNAL
REGIME_VOLATILITY_PERIOD=20
REGIME_VOLATILITY_THRESHOLD=1.5
REGIME_TREND_PERIOD=50
REGIME_TREND_THRESHOLD=0.0001
REGIME_ADJUST_TP_SL=true
REGIME_TRENDING_TP_MULTIPLIER=1.5
REGIME_RANGING_SL_MULTIPLIER=0.7

# =============================================================================
# LIVE TRADING
# =============================================================================
LIVE_SYMBOL=EUR/USD
LIVE_VENUE=IDEALPRO
LIVE_BAR_SPEC=15-MINUTE-MID-EXTERNAL
LIVE_FAST_PERIOD=40
LIVE_SLOW_PERIOD=260
LIVE_TRADE_SIZE=100000
LIVE_STOP_LOSS_PIPS=25
LIVE_TAKE_PROFIT_PIPS=80
LIVE_TRAILING_STOP_ACTIVATION_PIPS=25
LIVE_TRAILING_STOP_DISTANCE_PIPS=20
LIVE_MAX_OPEN_POSITIONS=1
LIVE_POSITION_MANAGEMENT_ENABLED=true
LIVE_ADAPTIVE_STOP_MODE=percentile
LIVE_SL_ATR_MULT=1.4
LIVE_TP_ATR_MULT=4.25
LIVE_TRAIL_ACTIVATION_ATR_MULT=0.8
LIVE_TRAIL_DISTANCE_ATR_MULT=0.6
LIVE_VOLATILITY_WINDOW=200
LIVE_VOLATILITY_SENSITIVITY=0.6
LIVE_MIN_STOP_DISTANCE_PIPS=5.0
