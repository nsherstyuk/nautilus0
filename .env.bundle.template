# =============================================================================
# CONSOLIDATED ENV TEMPLATE FOR BUNDLE REVIEW
# =============================================================================
# This file aggregates the main configuration parameters used by this project,
# combining backtest, live trading, and IBKR connection settings.
#
# It is intended primarily for *review* by another LLM or human, not as a
# guaranteed production-ready config. Existing files env.example and
# .env.live.template remain the authoritative templates used in practice.
# =============================================================================

# =============================================================================
# BACKTESTING PARAMETERS
# (Mirrors env.example; see that file for detailed commentary.)
# =============================================================================

# Required
BACKTEST_SYMBOL=EUR-USD
BACKTEST_START_DATE=2024-01-01
BACKTEST_END_DATE=2024-12-31

# Core backtest config
BACKTEST_VENUE=IDEALPRO
BACKTEST_BAR_SPEC=1-MINUTE-MID-EXTERNAL
BACKTEST_FAST_PERIOD=10
BACKTEST_SLOW_PERIOD=20
BACKTEST_TRADE_SIZE=100
BACKTEST_STARTING_CAPITAL=100000.0
CATALOG_PATH=data/historical
OUTPUT_DIR=logs/backtest_results
ENFORCE_POSITION_LIMIT=true
ALLOW_POSITION_REVERSAL=false

# Fixed SL/TP (used when adaptive_stop_mode=fixed)
BACKTEST_STOP_LOSS_PIPS=25
BACKTEST_TAKE_PROFIT_PIPS=50
BACKTEST_TRAILING_STOP_ACTIVATION_PIPS=20
BACKTEST_TRAILING_STOP_DISTANCE_PIPS=15

# Adaptive stops (ATR or percentile modes)
BACKTEST_ADAPTIVE_STOP_MODE=atr          # fixed | atr | percentile
BACKTEST_ATR_PERIOD=14
BACKTEST_TP_ATR_MULT=2.5
BACKTEST_SL_ATR_MULT=1.5
BACKTEST_TRAIL_ACTIVATION_ATR_MULT=1.0
BACKTEST_TRAIL_DISTANCE_ATR_MULT=0.8
BACKTEST_VOLATILITY_WINDOW=200
BACKTEST_VOLATILITY_SENSITIVITY=0.6
BACKTEST_MIN_STOP_DISTANCE_PIPS=5.0

# Regime detection (backtest)
STRATEGY_REGIME_DETECTION_ENABLED=false
STRATEGY_REGIME_ADX_TRENDING_THRESHOLD=25.0
STRATEGY_REGIME_ADX_RANGING_THRESHOLD=20.0
STRATEGY_REGIME_TP_MULTIPLIER_TRENDING=1.5
STRATEGY_REGIME_TP_MULTIPLIER_RANGING=0.8
STRATEGY_REGIME_SL_MULTIPLIER_TRENDING=1.0
STRATEGY_REGIME_SL_MULTIPLIER_RANGING=1.0
STRATEGY_REGIME_TRAILING_ACTIVATION_MULTIPLIER_TRENDING=0.75
STRATEGY_REGIME_TRAILING_ACTIVATION_MULTIPLIER_RANGING=1.25
STRATEGY_REGIME_TRAILING_DISTANCE_MULTIPLIER_TRENDING=0.67
STRATEGY_REGIME_TRAILING_DISTANCE_MULTIPLIER_RANGING=1.33

# Strategy filters (backtest)
STRATEGY_CROSSOVER_THRESHOLD_PIPS=0.7

STRATEGY_TREND_FILTER_ENABLED=false
STRATEGY_TREND_BAR_SPEC=1-MINUTE-MID-EXTERNAL
STRATEGY_TREND_EMA_PERIOD=150
STRATEGY_TREND_EMA_THRESHOLD_PIPS=0.0

STRATEGY_RSI_ENABLED=false
STRATEGY_RSI_PERIOD=14
STRATEGY_RSI_OVERBOUGHT=70
STRATEGY_RSI_OVERSOLD=30
STRATEGY_RSI_DIVERGENCE_LOOKBACK=5

STRATEGY_VOLUME_ENABLED=false
STRATEGY_VOLUME_AVG_PERIOD=20
STRATEGY_VOLUME_MIN_MULTIPLIER=1.2

STRATEGY_ATR_ENABLED=false
STRATEGY_ATR_PERIOD=14
STRATEGY_ATR_MIN_STRENGTH=0.001

STRATEGY_DMI_ENABLED=true
STRATEGY_DMI_BAR_SPEC=2-MINUTE-MID-EXTERNAL
STRATEGY_DMI_PERIOD=14

STRATEGY_STOCH_ENABLED=true
STRATEGY_STOCH_BAR_SPEC=15-MINUTE-MID-EXTERNAL
STRATEGY_STOCH_PERIOD_K=14
STRATEGY_STOCH_PERIOD_D=3
STRATEGY_STOCH_BULLISH_THRESHOLD=30
STRATEGY_STOCH_BEARISH_THRESHOLD=70

# Time filter (backtest)
BACKTEST_TIME_FILTER_ENABLED=false
BACKTEST_EXCLUDED_HOURS=1,2,12,18,21,23

# =============================================================================
# LIVE TRADING PARAMETERS
# (Mirrors .env.live.template; see that file for rich documentation.)
# =============================================================================

# Basic trading parameters
LIVE_SYMBOL=EUR/USD
LIVE_VENUE=IDEALPRO
LIVE_BAR_SPEC=15-MINUTE-MID-EXTERNAL
LIVE_FAST_PERIOD=10
LIVE_SLOW_PERIOD=20
LIVE_TRADE_SIZE=1000
LIVE_TRADER_ID=LIVE-TRADER-001
LIVE_LOG_DIR=logs/live

# Position management
LIVE_ENFORCE_POSITION_LIMIT=true
LIVE_ALLOW_POSITION_REVERSAL=false

# Fixed pips risk (used when LIVE_ADAPTIVE_STOP_MODE=fixed)
LIVE_STOP_LOSS_PIPS=25
LIVE_TAKE_PROFIT_PIPS=50
LIVE_TRAILING_STOP_ACTIVATION_PIPS=20
LIVE_TRAILING_STOP_DISTANCE_PIPS=15

# Adaptive stops (ATR / percentile)
LIVE_ADAPTIVE_STOP_MODE=atr
LIVE_ADAPTIVE_ATR_PERIOD=14
LIVE_TP_ATR_MULT=4.25
LIVE_SL_ATR_MULT=1.4
LIVE_TRAIL_ACTIVATION_ATR_MULT=1.0
LIVE_TRAIL_DISTANCE_ATR_MULT=0.8
LIVE_VOLATILITY_WINDOW=200
LIVE_VOLATILITY_SENSITIVITY=0.6
LIVE_MIN_STOP_DISTANCE_PIPS=5.0

# Regime detection (live)
LIVE_REGIME_DETECTION_ENABLED=false
LIVE_REGIME_ADX_TRENDING_THRESHOLD=25.0
LIVE_REGIME_ADX_RANGING_THRESHOLD=20.0
LIVE_REGIME_TP_MULTIPLIER_TRENDING=1.5
LIVE_REGIME_TP_MULTIPLIER_RANGING=0.8
LIVE_REGIME_SL_MULTIPLIER_TRENDING=1.0
LIVE_REGIME_SL_MULTIPLIER_RANGING=1.0
LIVE_REGIME_TRAILING_ACTIVATION_MULTIPLIER_TRENDING=0.75
LIVE_REGIME_TRAILING_ACTIVATION_MULTIPLIER_RANGING=1.25
LIVE_REGIME_TRAILING_DISTANCE_MULTIPLIER_TRENDING=0.67
LIVE_REGIME_TRAILING_DISTANCE_MULTIPLIER_RANGING=1.33

# Primary crossover threshold (live)
LIVE_CROSSOVER_THRESHOLD_PIPS=0.7

# DMI (live)
LIVE_DMI_ENABLED=true
LIVE_DMI_PERIOD=14
LIVE_DMI_BAR_SPEC=2-MINUTE-MID-EXTERNAL

# Stochastic (live)
LIVE_STOCH_ENABLED=true
LIVE_STOCH_PERIOD_K=14
LIVE_STOCH_PERIOD_D=3
LIVE_STOCH_BULLISH_THRESHOLD=30
LIVE_STOCH_BEARISH_THRESHOLD=60
LIVE_STOCH_BAR_SPEC=15-MINUTE-MID-EXTERNAL
LIVE_STOCH_MAX_BARS_SINCE_CROSSING=18

# Time filter with weekday-specific exclusions (live)
LIVE_TIME_FILTER_ENABLED=true
LIVE_EXCLUDED_HOURS_MODE=weekday
LIVE_EXCLUDED_HOURS=0,1,8,10,11,12,13,18,19,23
LIVE_EXCLUDED_HOURS_MONDAY=0,1,3,4,5,8,10,11,12,13,18,19,23
LIVE_EXCLUDED_HOURS_TUESDAY=0,1,2,4,5,6,7,8,9,10,11,12,13,18,19,23
LIVE_EXCLUDED_HOURS_WEDNESDAY=0,1,8,9,10,11,12,13,14,15,16,17,18,19,21,22,23
LIVE_EXCLUDED_HOURS_THURSDAY=0,1,2,7,8,10,11,12,13,14,18,19,22,23
LIVE_EXCLUDED_HOURS_FRIDAY=0,1,2,3,4,5,8,9,10,11,12,13,14,15,16,17,18,19,23
LIVE_EXCLUDED_HOURS_SATURDAY=
LIVE_EXCLUDED_HOURS_SUNDAY=0,1,8,10,11,12,13,18,19,21,22,23

# Trend filter (live)
LIVE_TREND_FILTER_ENABLED=false
LIVE_TREND_BAR_SPEC=1-MINUTE-MID-EXTERNAL
LIVE_TREND_EMA_PERIOD=150
LIVE_TREND_EMA_THRESHOLD_PIPS=0.0

# RSI filter (live)
LIVE_RSI_ENABLED=false
LIVE_RSI_PERIOD=14
LIVE_RSI_OVERBOUGHT=70
LIVE_RSI_OVERSOLD=30
LIVE_RSI_DIVERGENCE_LOOKBACK=5

# Volume filter (live)
LIVE_VOLUME_ENABLED=false
LIVE_VOLUME_AVG_PERIOD=20
LIVE_VOLUME_MIN_MULTIPLIER=1.2

# ATR filter (live)
LIVE_ATR_ENABLED=false
LIVE_ATR_PERIOD=14
LIVE_ATR_MIN_STRENGTH=0.001

# Entry timing (live)
LIVE_ENTRY_TIMING_ENABLED=false
LIVE_ENTRY_TIMING_BAR_SPEC=2-MINUTE-MID-EXTERNAL
LIVE_ENTRY_TIMING_METHOD=pullback
LIVE_ENTRY_TIMING_TIMEOUT_BARS=10

# =============================================================================
# IBKR CONNECTION CONFIGURATION
# (Used by config/ibkr_config.py and live/run_live.py)
# =============================================================================

# Core IB connection settings (current code uses these names)
IB_HOST=127.0.0.1
IB_PORT=7497
IB_CLIENT_ID=1
IB_ACCOUNT_ID=
IB_MARKET_DATA_TYPE=DELAYED_FROZEN   # REALTIME | DELAYED | DELAYED_FROZEN

# Optional legacy-style names (used in some docs/templates, kept for clarity)
# IBKR_HOST=127.0.0.1
# IBKR_PORT=7497
# IBKR_CLIENT_ID=1

# Historical data / chunking settings (backtests & backfill)
IBKR_ENABLE_CHUNKING=true
IBKR_REQUEST_DELAY_SECONDS=10
IBKR_CHUNK_OVERLAP_MINUTES=0

# =============================================================================
# MISC / PLACEHOLDERS
# =============================================================================

# Example of production/live-trading safety config (see config/live_trading.yaml)
# These are *not* read directly from env in current code, but represent
# the intended operational constraints.
#
# max_daily_loss_pct, max_daily_loss_absolute, max_position_value,
# max_total_exposure, position_limit, circuit breakers, etc., are defined
# in config/live_trading.yaml rather than environment variables.

# You can also set standard Nautilus logging vars if desired:
# LOG_LEVEL=INFO
# LOG_DIR=logs

