# NautilusTrader Environment Variables Example
# Copy this file to .env and modify the values as needed

# =============================================================================
# BACKTESTING PARAMETERS
# =============================================================================

# Required Variables
BACKTEST_SYMBOL=EUR-USD
BACKTEST_START_DATE=2024-01-01
BACKTEST_END_DATE=2024-12-31

# Optional Variables with Defaults
BACKTEST_VENUE=IDEALPRO
BACKTEST_BAR_SPEC=1-MINUTE-MID-EXTERNAL  # Default: 1-minute bars for MA crossover strategy
BACKTEST_FAST_PERIOD=10
BACKTEST_SLOW_PERIOD=20
BACKTEST_TRADE_SIZE=100
BACKTEST_STARTING_CAPITAL=100000.0
CATALOG_PATH=data/historical
OUTPUT_DIR=logs/backtest_results
ENFORCE_POSITION_LIMIT=true
ALLOW_POSITION_REVERSAL=false

#
# Multi-Timeframe Bar Ingestion for Forex:
# When ingesting forex data, the script automatically downloads multiple timeframes:
#   - 1-minute bars:  Primary timeframe for MA crossover signals (default)
#   - 2-minute bars:  Used by DMI trend filter (see STRATEGY_DMI_BAR_SPEC)
#   - 15-minute bars: Used by Stochastic momentum filter (see STRATEGY_STOCH_BAR_SPEC)
#   - Daily bars:     Used for longer-term analysis and context
#
# All timeframes are downloaded in a single ingestion run. No additional configuration
# is needed - the script handles chunking automatically based on IBKR limits.
#
# Expected download time for 30 days of EUR/USD data:
#   - 1-minute:  ~43,200 bars (5 chunks × 7 days, ~50 seconds)
#   - 2-minute:  ~21,600 bars (1 chunk × 30 days, ~10 seconds)
#   - 15-minute: ~2,880 bars (1 chunk × 30 days, ~5 seconds)
#   - Daily:     ~30 bars (1 chunk, <1 second)
#   Total: ~65 seconds + pacing delays (~40 seconds) = ~105 seconds (~2 minutes)
#
# Storage requirements per 30 days:
#   - 1-minute:  ~15-20 MB
#   - 2-minute:  ~8-10 MB
#   - 15-minute: ~1-2 MB
#   - Daily:     <1 MB
#   Total: ~25-35 MB per symbol per month

# Stop Loss and Take Profit Configuration
BACKTEST_STOP_LOSS_PIPS=25
BACKTEST_TAKE_PROFIT_PIPS=50

# Trailing Stop Configuration
# Trailing stop activates when position profit reaches activation threshold,
# then dynamically moves stop loss to lock in profits as price moves favorably.
# Example: With activation=20 and distance=15:
#   - Position opens at 1.1000
#   - Price moves to 1.1020 (+20 pips) → trailing activates
#   - Stop loss moves to 1.1005 (current price - 15 pips)
#   - Price moves to 1.1030 → stop moves to 1.1015
#   - Stop only moves in favorable direction (never widens)
BACKTEST_TRAILING_STOP_ACTIVATION_PIPS=20   # Activate trailing after this many pips in profit
BACKTEST_TRAILING_STOP_DISTANCE_PIPS=15     # Trail stop loss by this many pips behind current price

# =============================================================================
# TIME FILTER CONFIGURATION - Restrict Trading to Specific Hours
# =============================================================================
# Time filtering restricts trading to specific hours of the day, helping avoid
# low-liquidity periods, unprofitable hours, or specific market sessions. It
# supports both continuous trading windows (start/end hours) and excluded hour
# lists for granular control.

BACKTEST_TIME_FILTER_ENABLED=false
# Enable/disable time-based trade filtering (default: false). When enabled,
# trades are only executed during configured hours.

BACKTEST_TRADING_HOURS_START=0
# Trading window start hour in 24-hour format (0-23). Trades allowed from this
# hour (inclusive) to end hour. Must be less than TRADING_HOURS_END (overnight
# windows not supported).

BACKTEST_TRADING_HOURS_END=23
# Trading window end hour in 24-hour format (0-23). Trades allowed until this
# hour (inclusive). Example: start=8, end=16 allows trading from 8:00 AM to
# 4:59 PM.

BACKTEST_TRADING_HOURS_TIMEZONE=America/New_York
# IANA timezone string for hour interpretation (e.g., America/New_York,
# Europe/London, Asia/Tokyo, UTC). All bar timestamps are converted to this
# timezone before checking trading hours. See:
# https://en.wikipedia.org/wiki/List_of_tz_database_time_zones

BACKTEST_EXCLUDED_HOURS=
# Comma-separated list of hours (0-23) to exclude from trading, checked BEFORE
# start/end range validation. Useful for excluding specific unprofitable hours
# while maintaining a broader trading window. Works independently or alongside
# start/end parameters. Leave empty to disable.
# Example: "0,1,2,3,13,22" excludes midnight-3am and 1pm and 10pm.

# Usage Examples:
#
# Example 1: US Stock Market Hours (9 AM - 4 PM Eastern)
# BACKTEST_TIME_FILTER_ENABLED=true
# BACKTEST_TRADING_HOURS_START=9
# BACKTEST_TRADING_HOURS_END=16
# BACKTEST_TRADING_HOURS_TIMEZONE=America/New_York
# BACKTEST_EXCLUDED_HOURS=
#
# Example 2: Exclude Unprofitable Hours (based on trade timing analysis)
# BACKTEST_TIME_FILTER_ENABLED=true
# BACKTEST_TRADING_HOURS_START=4
# BACKTEST_TRADING_HOURS_END=21
# BACKTEST_TRADING_HOURS_TIMEZONE=UTC
# BACKTEST_EXCLUDED_HOURS=13  # Exclude 1 PM hour if analysis shows poor performance
#
# Example 3: Exclude Overnight and Lunch Hours
# BACKTEST_TIME_FILTER_ENABLED=true
# BACKTEST_TRADING_HOURS_START=0
# BACKTEST_TRADING_HOURS_END=23
# BACKTEST_TRADING_HOURS_TIMEZONE=UTC
# BACKTEST_EXCLUDED_HOURS=0,1,2,3,22,23,12,13  # No overnight (midnight-3am, 10pm-11pm) or lunch (noon-1pm)
#
# Example 4: London Forex Session Only (8 AM - 5 PM GMT)
# BACKTEST_TIME_FILTER_ENABLED=true
# BACKTEST_TRADING_HOURS_START=8
# BACKTEST_TRADING_HOURS_END=17
# BACKTEST_TRADING_HOURS_TIMEZONE=Europe/London
# BACKTEST_EXCLUDED_HOURS=
#
# Example 5: Disable Time Filtering (Trade 24/7)
# BACKTEST_TIME_FILTER_ENABLED=false
# # Other time filter parameters ignored when disabled

# Parameter Interactions:
# - excluded_hours is checked FIRST, then start/end range
# - excluded_hours works independently: can exclude specific hours even with start=0, end=23
# - Rejection reasons logged separately: 'time_filter_excluded_hour' vs 'time_filter_outside_hours'
# - Both filters can be used together for maximum control
# - Validation: start < end (overnight windows not supported in current implementation)
# - Validation: excluded_hours cannot block ALL hours in trading window
#
# Performance Impact:
# - Rejected signals are logged to rejected_signals.csv with reason
# - Use tools/analyze_trade_timing.py to identify unprofitable hours from backtest results
# - Time filtering reduces trade count but may improve Sharpe ratio and win rate

# ============================================================================
# STRATEGY FILTER CONFIGURATION
# ============================================================================
# Crossover threshold filter: Minimum pip difference required for valid crossover
# Rejects signals when |fast_sma - slow_sma| < threshold
# Reduces false signals during ranging/choppy markets
#
# Recommended values:
#   - 0.0: Disabled (all crossovers trigger signals)
#   - 0.5: Light filtering (removes micro-movements)
#   - 0.7: Moderate filtering (default, good balance)
#   - 1.0: Aggressive filtering (only strong crossovers)
#   - 2.0: Very aggressive (may miss valid signals)
#
# For non-FX instruments, threshold is in price units (e.g., $0.01 for stocks)
STRATEGY_CROSSOVER_THRESHOLD_PIPS=0.7  # Minimum pip difference for valid crossover

# ============================================================================
# STRATEGY FILTER CONFIGURATION - DMI (Directional Movement Index)
# ============================================================================
# DMI filter provides trend confirmation for MA crossover signals using multi-timeframe bars.
# Bullish crossover requires +DI > -DI; bearish crossover requires -DI > +DI.
# Signals with mismatched trend are rejected with reason "dmi_trend_mismatch".
STRATEGY_DMI_ENABLED=true                    # Enable/disable DMI filter (default: true)
STRATEGY_DMI_BAR_SPEC=2-MINUTE-MID-EXTERNAL  # Bar timeframe for DMI (default: 2-minute)
STRATEGY_DMI_PERIOD=14                       # DMI smoothing period (default: 14)
# Notes:
# - DMI needs 14 bars to initialize; signals before init skip the DMI check
# - For FX, prefer MID price side to match catalog data
# - Use -EXTERNAL for historical catalog bars

# ============================================================================
# STRATEGY FILTER CONFIGURATION - STOCHASTIC (Momentum Oscillator)
# ============================================================================
# Stochastic filter provides momentum confirmation for MA crossover signals using 15-minute bars.
# This prevents buying at market tops and selling at market bottoms by checking momentum direction
# and overbought/oversold conditions before allowing trade execution.
#
# Gating Logic:
# - Bullish entries (BUY): %K > %D AND %K > 30 AND %D > 30 (upward momentum, not oversold)
# - Bearish entries (SELL): %K < %D AND %K < 70 AND %D < 70 (downward momentum, not overbought)
#
# Benefits:
# - Prevents buying at tops and selling at bottoms
# - Confirms momentum direction before entry
# - Reduces false signals during ranging markets
# - Works as a final filter after DMI trend confirmation
#
# Stochastic Zones (0-100 scale):
# - Oversold: 0-20 (extreme), 0-30 (moderate) - Avoid buying in these zones
# - Neutral: 30-70 - Normal trading range
# - Overbought: 70-100 (moderate), 80-100 (extreme) - Avoid selling in these zones
#
# Configuration Parameters:
STRATEGY_STOCH_ENABLED=true                    # Enable/disable Stochastic filter (default: true)
STRATEGY_STOCH_BAR_SPEC=15-MINUTE-MID-EXTERNAL # Bar timeframe for Stochastic (default: 15-minute)
STRATEGY_STOCH_PERIOD_K=14                    # %K period - fast line (default: 14)
STRATEGY_STOCH_PERIOD_D=3                     # %D period - slow line smoothing (default: 3)
STRATEGY_STOCH_BULLISH_THRESHOLD=30          # Minimum %K/%D for bullish entries (default: 30)
STRATEGY_STOCH_BEARISH_THRESHOLD=70          # Maximum %K/%D for bearish entries (default: 70)
#
# Important Notes:
# - Stochastic needs 14 bars to initialize (3.5 hours for 15-minute bars)
# - Signals before initialization skip the Stochastic check (allows early trading)
# - Set STRATEGY_STOCH_ENABLED=false to disable the filter entirely
# - Ensure 15-minute bars are downloaded in your data catalog
# - Standard threshold ranges: 20/80 (aggressive), 30/70 (moderate), 40/60 (conservative)
#
# Usage Examples:
# # Disable Stochastic filter
# STRATEGY_STOCH_ENABLED=false
#
# # Use 5-minute bars for faster response (requires 5-minute data)
# STRATEGY_STOCH_BAR_SPEC=5-MINUTE-MID-EXTERNAL
#
# # Aggressive thresholds (wider entry zone)
# STRATEGY_STOCH_BULLISH_THRESHOLD=20
# STRATEGY_STOCH_BEARISH_THRESHOLD=80
#
# # Conservative thresholds (narrower entry zone)
# STRATEGY_STOCH_BULLISH_THRESHOLD=40
# STRATEGY_STOCH_BEARISH_THRESHOLD=60

# =============================================================================
# STRATEGY PRE-CROSSOVER SEPARATION
# =============================================================================
# Minimum MA separation before crossing for valid signal
# Purpose: Filters choppy crossovers by requiring minimum separation between fast and slow MAs
# before a crossover can be considered valid. Prevents false signals from markets where MAs
# oscillate closely around each other.
# 
# Behavior: 
# - For BULLISH crossover: fast MA must be BELOW slow MA by at least this threshold before crossing above
# - For BEARISH crossover: fast MA must be ABOVE slow MA by at least this threshold before crossing below
# - 0.0 = disabled (all crossovers valid, backward compatible)
# - 0.5-1.0 = light filtering (removes micro-movements)
# - 1.5-2.0 = moderate filtering (requires clear separation)
# - 2.5+ = aggressive filtering (only strong trend changes)
#
# Typical ranges: 0.5–2.0 for EUR/USD
# Relationship to STRATEGY_CROSSOVER_THRESHOLD_PIPS: Independent, post-crossover
STRATEGY_PRE_CROSSOVER_SEPARATION_PIPS=0.0

# =============================================================================
# LIVE TRADING PARAMETERS
# =============================================================================

# Core Live Settings (uncomment and adjust for live trading)
# LIVE_SYMBOL=EUR/USD
# LIVE_VENUE=IDEALPRO
# LIVE_BAR_SPEC=15-MINUTE-MID-EXTERNAL
# LIVE_FAST_PERIOD=10
# LIVE_SLOW_PERIOD=20
# LIVE_TRADE_SIZE=100000
# LIVE_ENFORCE_POSITION_LIMIT=true
# LIVE_ALLOW_POSITION_REVERSAL=false
# LIVE_LOG_DIR=logs/live
# LIVE_TRADER_ID=LIVE-TRADER-001

# Interactive Brokers Configuration (IBKR integration expects IB_* names)
IB_HOST=127.0.0.1
IB_PORT=7497
IB_CLIENT_ID=1
IB_ACCOUNT_ID=
IB_MARKET_DATA_TYPE=DELAYED_FROZEN

# Phase 6 Optimization Parameters (Live Trading)
#
# Risk Management Parameters (FX pips-based):
# LIVE_STOP_LOSS_PIPS=25                     # Stop loss distance in pips
# LIVE_TAKE_PROFIT_PIPS=50                   # Take profit distance in pips (must be > SL)
# LIVE_TRAILING_STOP_ACTIVATION_PIPS=20      # Profit threshold to activate trailing stop
# LIVE_TRAILING_STOP_DISTANCE_PIPS=15        # Trail distance in pips (must be < activation)
# Trailing stop activates when position profit reaches activation pips,
# then trails price by distance pips to lock in profits while allowing further gains.
#
# Signal Filter Parameters:
# LIVE_CROSSOVER_THRESHOLD_PIPS=0.7          # Minimum MA separation in pips to generate signal (0 disables)
# Higher threshold = fewer but higher-quality signals.
#
# DMI (Directional Movement Index) Parameters:
# LIVE_DMI_ENABLED=true                      # Enable DMI trend filter (true/false)
# LIVE_DMI_PERIOD=14                         # DMI calculation period
# LIVE_DMI_BAR_SPEC=2-MINUTE-MID-EXTERNAL    # Bar timeframe for DMI calculation
# DMI filters signals based on trend strength. Disable to allow all crossovers.
#
# Stochastic Oscillator Parameters:
# LIVE_STOCH_ENABLED=true                    # Enable Stochastic momentum filter (true/false)
# LIVE_STOCH_PERIOD_K=14                     # Stochastic %K period
# LIVE_STOCH_PERIOD_D=3                      # Stochastic %D smoothing period
# LIVE_STOCH_BULLISH_THRESHOLD=30            # Max %K for bullish signals (oversold threshold)
# LIVE_STOCH_BEARISH_THRESHOLD=70            # Min %K for bearish signals (overbought threshold)
# LIVE_STOCH_BAR_SPEC=15-MINUTE-MID-EXTERNAL # Bar timeframe for Stochastic calculation
# LIVE_STOCH_MAX_BARS_SINCE_CROSSING=9       # Max bars since %K/%D crossing to validate signal
# Stochastic filters signals based on momentum; disable to allow all crossovers.

# LIVE_TIME_FILTER_ENABLED=false  # Add time filtering if needed based on analysis
# LIVE_TRADING_HOURS_START=4
# LIVE_TRADING_HOURS_END=21
# LIVE_TRADING_HOURS_TIMEZONE=UTC
# LIVE_EXCLUDED_HOURS=  # Add comma-separated hours based on tools/analyze_trade_timing.py results

# =============================================================================
# LIVE TRADING - TIME FILTER CONFIGURATION
# =============================================================================
# Time filtering for live trading follows the same logic as backtesting.
# Use these parameters to restrict live trade execution to specific hours.
#
# IMPORTANT: Always backtest with time filters before using in live trading!
# Use tools/analyze_trade_timing.py to identify optimal trading hours.

LIVE_TIME_FILTER_ENABLED=false
# Enable/disable time-based trade filtering for live trading (default: false)

LIVE_TRADING_HOURS_START=0
# Trading window start hour in 24-hour format (0-23)

LIVE_TRADING_HOURS_END=23
# Trading window end hour in 24-hour format (0-23)

LIVE_TRADING_HOURS_TIMEZONE=UTC
# IANA timezone string (America/New_York, Europe/London, Asia/Tokyo, UTC)

LIVE_EXCLUDED_HOURS=
# Comma-separated hours to exclude (e.g., "0,1,2,3,13,22" to avoid unprofitable hours)
# Leave empty to disable excluded hours filtering
#
# Example: Exclude overnight hours for live EUR/USD trading
# LIVE_TIME_FILTER_ENABLED=true
# LIVE_TRADING_HOURS_START=4
# LIVE_TRADING_HOURS_END=21
# LIVE_TRADING_HOURS_TIMEZONE=UTC
# LIVE_EXCLUDED_HOURS=13  # Exclude 1 PM UTC based on backtest analysis

# Time Filter Best Practices:
# 1. Always backtest with time filters before live deployment
# 2. Use tools/analyze_trade_timing.py to identify unprofitable hours
# 3. Consider market liquidity: avoid low-volume hours (e.g., late night for forex)
# 4. Timezone awareness: ensure timezone matches your target market
# 5. Combine with other filters (DMI, Stochastic) for comprehensive signal validation
# 6. Monitor rejected_signals.csv to verify filter is working as expected
# 7. Review filter effectiveness: if too many signals rejected, adjust parameters

# =============================================================================
# Performance Monitoring (Live Trading)
# =============================================================================
# Enable/disable real-time performance monitoring
ENABLE_PERFORMANCE_MONITORING=true

# Performance monitoring poll interval in seconds (default: 60)
# Lower values = more frequent snapshots, higher overhead
# Higher values = less frequent snapshots, lower overhead
PERFORMANCE_MONITOR_INTERVAL=60

# Optional: Backtest/benchmark period length in days for trade frequency expectation
# If not set, defaults to 365 days. Used by performance monitor and reports.
# PHASE6_EXPECTED_PERIOD_DAYS=365

# Phase 6 rank being deployed (optional, auto-detected if not set)
# Used to load correct benchmark expectations for performance comparison
# PHASE6_RANK=1

# Phase 6 run ID being deployed (optional, alternative to PHASE6_RANK)
# PHASE6_RUN_ID=21

# Performance monitoring tracks live trading metrics (PnL, win rate, Sharpe ratio, drawdown)
# and compares them to Phase 6 backtest expectations. Metrics are saved to
# logs/live/performance_metrics.json. Alerts are logged when performance deviates significantly
# from backtest (e.g., win rate drops >10%, drawdown exceeds backtest max).
# Generate reports with:
#   python live/generate_performance_report.py --period daily

# Note: Performance monitoring adds minimal overhead (~1-2% CPU). The monitor polls portfolio
# state every 60 seconds by default. Adjust PERFORMANCE_MONITOR_INTERVAL if needed. Disable
# monitoring during initial testing with ENABLE_PERFORMANCE_MONITORING=false.

# =============================================================================
# FOREX EXAMPLE CONFIGURATION
# =============================================================================

# Example for EUR/USD trading
# BACKTEST_SYMBOL=EUR-USD
# BACKTEST_VENUE=IDEALPRO
# BACKTEST_BAR_SPEC=1-MINUTE-MID-EXTERNAL
# BACKTEST_STOP_LOSS_PIPS=25     # Stop loss distance in pips (EUR/USD: 25 pips = 0.0025)
# BACKTEST_TAKE_PROFIT_PIPS=50   # Take profit distance in pips (EUR/USD: 50 pips = 0.0050)
# BACKTEST_TRAILING_STOP_ACTIVATION_PIPS=20  # Activate trailing stop after this many pips of profit
# BACKTEST_TRAILING_STOP_DISTANCE_PIPS=15    # Trail stop loss by this many pips behind current price

# =============================================================================
# IBKR HISTORICAL DATA CHUNKING CONFIGURATION
# =============================================================================
# Automatic chunking prevents timeouts when requesting large date ranges.
# IBKR has documented limits (60 requests per 10 minutes) and practical
# timeout thresholds that vary by bar size:
#   - 1-minute bars: ~7 days per request
#   - 15-minute bars: ~60 days per request
#   - Daily bars: ~10 years per request
#
# Chunking splits large date ranges into smaller requests with pacing delays.

# Enable/disable automatic chunking (default: true)
# Set to false to use single requests (only for short date ranges)
IBKR_ENABLE_CHUNKING=true

# Delay between chunk requests in seconds (default: 10)
# Prevents IBKR pacing violations (max 60 requests per 10 minutes)
# Recommended: 10 seconds (safe for all bar sizes)
# Minimum: 1 second (risky, may trigger error 162)
IBKR_REQUEST_DELAY_SECONDS=10

# Overlap between chunks in minutes (default: 0)
# Adds redundancy at chunk boundaries to prevent gaps
# Set to 0 for no overlap (recommended for most use cases)
# Set to 1-5 minutes if you observe missing bars at chunk boundaries
IBKR_CHUNK_OVERLAP_MINUTES=0

# Example: Requesting 30 days of 1-minute bars
# - Without chunking: Single request, likely timeout
# - With chunking: 5 chunks (7+7+7+7+2 days), 10s delay between chunks
# - Total time: ~50 seconds (5 chunks × 10s delay)

# =============================================================================
# STOCK EXAMPLE CONFIGURATION
# =============================================================================

# Example for stock trading (SL/TP pips not applicable)
# BACKTEST_SYMBOL=AAPL
# BACKTEST_VENUE=SMART
# BACKTEST_BAR_SPEC=1-MINUTE-LAST-EXTERNAL
# Note: For stocks, use percentage-based or tick-based stops instead of pips

# =============================================================================
# CRYPTO EXAMPLE CONFIGURATION
# =============================================================================

# Example for crypto trading (SL/TP pips not applicable)
# BACKTEST_SYMBOL=BTC-USD
# BACKTEST_VENUE=COINBASE
# BACKTEST_BAR_SPEC=1-MINUTE-LAST-EXTERNAL
# Note: For crypto, use percentage-based or tick-based stops instead of pips

# =============================================================================
# Phase 6 Optimized Configuration for EUR/USD (Example from Rank 1)
# =============================================================================
# This example shows Phase 6 optimized parameters. Use tools/deploy_phase6_config.py to
# generate configuration from optimization results.
#
# LIVE_SYMBOL=EUR/USD
# LIVE_VENUE=IDEALPRO
# LIVE_BAR_SPEC=15-MINUTE-MID-EXTERNAL
# LIVE_FAST_PERIOD=8
# LIVE_SLOW_PERIOD=21
# LIVE_TRADE_SIZE=100000
# LIVE_STOP_LOSS_PIPS=30
# LIVE_TAKE_PROFIT_PIPS=60
# LIVE_TRAILING_STOP_ACTIVATION_PIPS=25
# LIVE_TRAILING_STOP_DISTANCE_PIPS=18
# LIVE_CROSSOVER_THRESHOLD_PIPS=0.5
# LIVE_DMI_ENABLED=true
# LIVE_DMI_PERIOD=14
# LIVE_DMI_BAR_SPEC=2-MINUTE-MID-EXTERNAL
# LIVE_STOCH_ENABLED=true
# LIVE_STOCH_PERIOD_K=14
# LIVE_STOCH_PERIOD_D=3
# LIVE_STOCH_BULLISH_THRESHOLD=30
# LIVE_STOCH_BEARISH_THRESHOLD=70
# LIVE_STOCH_BAR_SPEC=15-MINUTE-MID-EXTERNAL
# LIVE_STOCH_MAX_BARS_SINCE_CROSSING=9
# LIVE_ENFORCE_POSITION_LIMIT=true
# LIVE_ALLOW_POSITION_REVERSAL=false

# =============================================================================
# IMPORTANT: Phase 6 Parameter Guidelines
# =============================================================================
# - Ensure interdependencies: TAKE_PROFIT_PIPS > STOP_LOSS_PIPS; TRAILING_STOP_ACTIVATION_PIPS > TRAILING_STOP_DISTANCE_PIPS
# - Disabling filters (DMI/Stoch) increases signal frequency and risk; backtest before live deployment
# - Review optimization results in optimization/results/phase6_refinement_results_top_10.json
# - Deployment helper: python tools/deploy_phase6_config.py --rank 1

# Forex Position Sizing Notes (Phase 6 risk management)
# Phase 6 parameters include dynamic SL/TP levels. Ensure position size accounts for the
# configured stop loss distance. Example: 30 pip SL on 1 standard lot EUR/USD = ~$300 risk.
